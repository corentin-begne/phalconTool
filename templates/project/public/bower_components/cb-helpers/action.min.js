var ActionHelper;!function(){"use strict";ActionHelper=function(){function e(){var e=o();return e instanceof XMLHttpRequest&&e.addEventListener("progress",this.progress,!1),e.upload&&e.upload.addEventListener("progress",this.progress,!1),e}extendSingleton(ActionHelper),require(["bower_components/jquery-percentageloader/index.css","bower_components/jquery.percentageloader/index.js"]),this.basePath="/"+$("body").attr("app")+"/";var t="onprogress"in $.ajaxSettings.xhr();if(t){var o=$.ajaxSettings.xhr;$.ajaxSettings.xhr=e}},ActionHelper.getInstance=function(){return getSingleton(ActionHelper)},ActionHelper.prototype.execute=function(e,t){function o(e){return isDefined(t.noload)?!1:(e.target instanceof XMLHttpRequest&&$("#loader").percentageLoader({progress:e.loaded/e.total}),void(isDefined(t.upload)&&e.target instanceof XMLHttpRequestUpload&&$("#uploader").percentageLoader({progress:e.loaded/e.total})))}function r(e){t.cb({success:!1,error:e})}function n(e){t.cb(e)}function a(){isDefined(t.noload)||$(".backdrop").remove()}isDefined(t.noload)||($("body").append("<div class='backdrop'><div id='loader'></div></div>"),$("#loader").percentageLoader({width:128,height:128,progress:0,value:"chargement"}),isDefined(t.upload)&&($("body .backdrop").append("<div id='uploader'></div>"),$("#uploader").percentageLoader({width:64,height:64,progress:0,value:"upload"})));var i={type:t.type,data:e,url:this.basePath+t.action,dataType:t.dataType,success:n,error:r,complete:a,progress:o};isDefined(t.form)&&(i.cache=!1,i.contentType=!1,i.processData=!1),$.ajax(i)},ActionHelper.prototype.redirect=function(e,t){void 0===t?window.location.href=this.basePath+e:window.open(window.location.origin+this.basePath+e,"_"+t)}}();